{
  "$schema": "http://json-schema.org/draft-07/schema#",

  "definitions": {

    "LoTE": {
      "type": "object",
      "properties": {
        "SchemeInformation": { "$ref": "#/definitions/SchemeInformation" },
        "TrustedEntitiesList": { "$ref": "#/definitions/TrustedEntitiesList" }
      },
      "additionalProperties": false
    },

    "SchemeInformation": {
      "type": "object",
      "properties": {
        "LoTEVersionIdentifier": { "$ref": "#/definitions/LoTEVersionIdentifier" },
        "LoTESequenceNumber": { "$ref": "#/definitions/LoTESequenceNumber" },
        "LoTEType": { "$ref": "#/definitions/LoTEType" },
        "SchemeOperatorName": { "$ref": "#/definitions/SchemeOperatorName" },
        "SchemeOperatorAddress": { "$ref": "#/definitions/SchemeOperatorAddress" },
        "SchemeName": { "$ref": "#/definitions/SchemeName" },
        "SchemeInformationURI": { "$ref": "#/definitions/SchemeInformationURI" },
        "StatusDeterminationApproach": { "$ref": "#/definitions/StatusDeterminationApproach" },
        "SchemeTypeCommunityRules": { "$ref": "#/definitions/SchemeTypeCommunityRules" },
        "SchemeTerritory": { "$ref": "#/definitions/SchemeTerritory" },
        "PolicyOrLegalNotice": { "$ref": "#/definitions/PolicyOrLegalNotice" },
        "HistoricalInformationPeriod": { "$ref": "#/definitions/HistoricalInformationPeriod" },
        "PointerToOtherLoTE": { "$ref": "#/definitions/PointerToOtherLoTE" },
        "ListIssueDateTime": { "$ref": "#/definitions/ListIssueDateTime" },
        "nextUpdate": { "$ref": "#/definitions/nextUpdate" },
        "DistributionPoints": { "$ref": "#/definitions/DistributionPoints" },
        "SchemeExtensions": { "$ref": "#/definitions/SchemeExtensions" }
      },
      "required": [ "LoTEVersionIdentifier", "LoTESequenceNumber", "SchemeOperatorName", "ListIssueDateTime", "nextUpdate" ],
      "additionalProperties": false
    },

    "LoTEVersionIdentifier": {
      "type": "integer"
    },

    "LoTESequenceNumber": {
      "type": "integer"
    },

    "LoTEType": {
      "type": "string",
      "format": "uri"
    },

    "SchemeOperatorName": {
      "type": "array",
      "items": {"type": "string"},
      "minItems": 1
    },

    "SchemeOperatorAddress": {
      "type": "object",
      "properties": {
        "SchemeOperatorPostalAddress": { "$ref": "#/definitions/PostalAddresses" },
        "SchemeOperatorElectronicAddress": { "$ref": "#/definitions/ElectronicAddresses" }
      },
      "required": [ "SchemeOperatorPostalAddress", "SchemeOperatorElectronicAddress" ],
      "additionalProperties": false
    },

    "PostalAddresses": {
      "type": "array",
      "items": {"$ref": "#/definitions/PostalAddress"},
      "minItems": 1
    },

    "PostalAddress": {
      "type": "object",
      "properties":{
        "StreetAddress": {"type": "string"},
        "Locality": {"type": "string"},
        "StateOrProvince": {"type": "string"},
        "PostalCode": {"type": "string"},
        "CountryName": {"type": "string"}
      },
      "required": [ "StreetAddress", "CountryName" ],
      "additionalProperties": false
    },

    "ElectronicAddresses": {
      "type": "array",
      "items": {"$ref": "#/definitions/ElectronicAddress"},
      "minItems": 1
    },

    "ElectronicAddress": {
      "type": "object",
      "properties":{
        "EmailAddress": {"type": "string", "format": "email"},
        "Website": {"type": "string", "format": "uri"},
        "TelephoneNumber": {"type": "string", "format": "uri"}
      },
      "required": [ "EmailAddress", "Website" ],
      "additionalProperties": false
    },

    "SchemeName": {
      "type": "array",
      "items": {"type": "string"},
      "minItems": 1
    },

    "SchemeInformationURI": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "StatusDeterminationApproach": {
      "type": "string",
      "format": "uri"
    },

    "SchemeTypeCommunityRules": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "SchemeTerritory": {
      "type": "string",
      "format": "uri"
    },

    "PolicyOrLegalNotice": {
      "type": "array",
      "oneOf":[
        {
          "items": {
            "type": "string", "format": "uri"
          }
        },
        {
          "items": {
            "type": "object",
            "properties":{
              "LoTELegalNotice": {"type": "string"}
            },
            "required": [ "LoTELegalNotice" ] }
        }
      ],
      "minItems": 1
    },

    "HistoricalInformationPeriod": {
      "type": "integer"
    },

    "PointerToOtherLoTE": {
      "type": "array",
      "items": {"$ref":"#/definitions/OtherTSLPointer"},
      "minItems": 1
    },

    "OtherTSLPointer": {
      "type": "object",
      "properties": {
        "LoTELocation": {"type": "string", "format": "uri"},
        "ServiceDigitalIdentities": {
          "type": "array",
          "items": {"$ref":"#/definitions/ServiceDigitalIdentity"},
          "minItems": 1
        },
        "LoTEQualifiers": {
          "type": "array",
          "items": {"$ref":"#/definitions/LoTEQualifier"},
          "minItems": 1
        }
      },
      "additionalProperties": false
    },

    "ServiceDigitalIdentity": {
      "type": "object",
      "properties": {
        "X509Certificates": {
          "type": "array",
          "items": {"$ref":"#/definitions/pkiOb"},
          "minItems": 1
        },
        "X509SubjectName": {"type": "string"},
        "X509SKI": {"type": "string", "contentEncoding" : "base64"},
        "OtherId": {"type": "string"}
      },
      "additionalProperties": false
    },

    "pkiOb": {
      "type": "object",
      "properties":{
        "encoding": {"type": "string", "format": "uri"},
        "specRef": {"type": "string"},
        "val": {"type": "string", "contentEncoding" : "base64"}
      },
      "required": ["val"],
      "additionalProperties": false
    },

    "LoTEQualifier": {
      "type": "object",
      "properties":{
        "LoTEType": { "$ref": "#/definitions/LoTEType" },
        "SchemeOperatorName": { "$ref": "#/definitions/SchemeOperatorName" },
        "SchemeTypeCommunityRules": { "$ref": "#/definitions/SchemeTypeCommunityRules" },
        "SchemeTerritory": { "$ref": "#/definitions/SchemeTerritory" },
        "MimeType": { "$ref": "#/definitions/MimeType" }
      },
      "required": ["val"],
      "additionalProperties": false
    },

    "MimeType": {
      "type": "string"
    },

    "ListIssueDateTime": {
      "type": "string",
      "format": "date-time"
    },

    "nextUpdate": {
      "type": "string",
      "format": "date-time"
    },

    "DistributionPoints": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "SchemeExtensions": {
      "type": "array",
      "minItems": 1
    },

    "TrustedEntitiesList": {
      "type": "array",
      "items": {"$ref":"#/definitions/TrustedEntity"},
      "minItems": 1
    },

    "TrustedEntity": {
      "type": "object",
      "properties": {
        "TrustedEntityInformation" : { "$ref": "#/definitions/TrustedEntityInformation" },
        "TrustedEntityServices" : { "$ref": "#/definitions/TrustedEntityServices" }
      },
      "required": ["TrustedEntityInformation", "TrustedEntityServices"],
      "additionalProperties": false
    },

    "TrustedEntityServices": {
      "type": "array",
      "items": {"$ref":"#/definitions/TrustedEntityService"},
      "minItems": 1
    },

    "TrustedEntityService": {
      "type": "object",
      "properties": {
        "ServiceInformation" : { "$ref": "#/definitions/ServiceInformation" },
        "ServiceHistory" : { "$ref": "#/definitions/ServiceHistory" }
      },
      "required": ["ServiceInformation"],
      "additionalProperties": false
    },

    "ServiceInformation": {
      "type": "object",
      "properties": {
        "ServiceName" : { "$ref": "#/definitions/ServiceName" },
        "ServiceDigitalIdentity" : { "$ref": "#/definitions/ServiceDigitalIdentity" },
        "ServiceTypeIdentifier" : { "$ref": "#/definitions/ServiceTypeIdentifier" },
        "ServiceStatus" : { "$ref": "#/definitions/ServiceStatus" },
        "StatusStartingTime" : { "$ref": "#/definitions/StatusStartingTime" },
        "SchemeServiceDefinitionURI" : { "$ref": "#/definitions/SchemeServiceDefinitionURI" },
        "ServiceSupplyPoint" : { "$ref": "#/definitions/ServiceSupplyPoint" },
        "ServiceDefinitionURI" : { "$ref": "#/definitions/ServiceDefinitionURI" },
        "ServiceInformationExtensions" : { "$ref": "#/definitions/ServiceInformationExtensions" }
      },
      "required": ["ServiceName", "ServiceDigitalIdentity"],
      "additionalProperties": false
    },

    "ServiceTypeIdentifier": {
      "type": "string",
      "format": "uri"
    },

    "ServiceName": {
      "type": "string"
    },

    "ServiceStatus": {
      "type": "string",
      "format": "uri"
    },

    "StatusStartingTime": {
      "type": "string",
      "format": "date-time"
    },

    "SchemeServiceDefinitionURI": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "ServiceSupplyPoint": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "ServiceDefinitionURI": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "ServiceInformationExtensions": {
      "type": "array",
      "minItems": 1
    },

    "ServiceHistory": {
      "type": "object",
      "properties": {
        "ServiceName" : { "$ref": "#/definitions/ServiceName" },
        "ServiceDigitalIdentity" : { "$ref": "#/definitions/ServiceDigitalIdentity" },
        "ServiceStatus" : { "$ref": "#/definitions/ServiceStatus" },
        "StatusStartingTime" : { "$ref": "#/definitions/StatusStartingTime" },
        "ServiceTypeIdentifier" : { "$ref": "#/definitions/ServiceTypeIdentifier" },
        "ServiceInformationExtensions" : { "$ref": "#/definitions/ServiceInformationExtensions" }
      },
      "required": ["ServiceName", "ServiceDigitalIdentity", "ServiceStatus", "StatusStartingTime"],
      "additionalProperties": false
    },

    "TrustedEntityInformation": {
      "type": "object",
      "properties": {
        "TEName" : { "$ref": "#/definitions/TEName" },
        "TETradeName" : { "$ref": "#/definitions/TETradeName" },
        "TEAddress" : { "$ref": "#/definitions/TEAddress" },
        "TEInformationURI" : { "$ref": "#/definitions/TEInformationURI" },
        "TEInformationExtensions" : { "$ref": "#/definitions/TEInformationExtensions" }
      },
      "required": ["TEName", "TETradeName", "TEAddress", "TEInformationURI"],
      "additionalProperties": false
    },

    "TEName": {
      "type": "array",
      "items": {"type": "string"},
      "minItems": 1
    },

    "TETradeName": {
      "type": "array",
      "items": {"type": "string", "format": "uri"},
      "minItems": 1
    },

    "TEAddress": {
      "type": "object",
      "properties": {
        "TEPostalAddress": { "$ref": "#/definitions/PostalAddress" },
        "TEElectronicAddress": { "$ref": "#/definitions/ElectronicAddress" }
      },
      "required": [ "TEPostalAddress", "TEElectronicAddress" ],
      "additionalProperties": false
    },

    "TEInformationURI": {
      "type": "array",
      "items": {"type": "string"},
      "minItems": 1
    },

    "TEInformationExtensions": {
      "type": "array",
      "minItems": 1
    }
  },


  "type": "object",
  "required": [
    "LoTE"
  ],
  "additionalProperties": false,
  "properties": {
    "LoTE": {
      "$ref": "#/definitions/LoTE"
    }
  }

}